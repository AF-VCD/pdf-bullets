{"version":3,"sources":["components/utils/Tools.js","const/const.js","components/Bullets/Bullet.js","components/utils/utils.js","components/Bullets/BulletComparator.js","static/abbrs.xlsx","components/Abbreviation/AbbreviationTable.js","components/Abbreviation/Abbreviation.js","components/utils/Thesaurus.js","const/defaults.js","BulletApp.js","serviceWorker.js","index.js"],"names":["pdfjs","require","pdfjsWorker","GlobalWorkerOptions","workerSrc","ImportTools","props","importFile","e","fileInputRef","current","value","callback","file","console","log","state","type","getDataFromPDF","getDataFromJSON","files","inputClick","importType","setState","click","filedata","pdfSetup","arrayBuffer","then","buffer","uint8Array","Uint8Array","getDocument","data","promise","getXFA","pdf","getFormName","getMetadata","result","info","Custom","getAllData","Promise","all","pullBullets","results","formName","datasetXML","replace","xmlDoc","DOMParser","parseFromString","bulletText","Forms","tagName","querySelector","innerHTML","getPageInfo","templateXML","fonts","fontSizes","widths","i","bulletTag","getAttribute","getBulletsFromPdf","textUpdater","onTextUpdate","widthUpdater","onWidthUpdate","bulletsHTML","pageData","parseFloat","width","bullets","documentElement","textContent","reader","FileReader","onload","JSON","parse","target","onJSONImport","readAsText","hoverOut","hovering","toggleMenu","React","createRef","menuState","this","className","onChange","style","display","ref","onClick","aria-haspopup","aria-controls","icon","faAngleDown","id","role","onMouseLeave","href","PureComponent","OutputTools","widthAWD","widthEPR","widthOPR","min","max","step","onWidthChange","enableOptim","onOptimChange","InputTools","onTextNorm","SaveTools","onSave","settings","storedData","stringify","localStorage","setItem","length","err","name","alert","onExport","dataURI","encodeURIComponent","exportRef","download","Logo","ThesaurusTools","onHide","DocumentTools","aria-label","onThesaurusHide","getSelectionInfo","editorState","selectionState","getSelection","anchorKey","getAnchorKey","contentBlock","getCurrentContent","getBlockForKey","start","getStartOffset","end","getEndOffset","selectedText","getText","slice","renderBulletText","text","getWidth","match","error","fullWidth","trimEnd","textLines","lines","overflow","textSplit","split","answerIdx","join","recursedText","warn","recursedResult","avgCharWidth","guessIndex","parseInt","firstGuessWidth","substring","tokenize","sentence","STATUS","Bullet","widthPx","height","onHighlight","canvasRef","useRef","useState","outputTextLines","setOutputTextLines","color","setColor","loading","setLoading","optimStatus","setOptimStatus","rendering","setBulletRendering","getTextWidth","txt","canvas","context","getContext","font","textAlign","measureText","useEffect","optimResults","evalFcn","optWords","initResults","seed","prevResults","finalResults","newSpace","finalOptimStatus","worstCaseResults","status","indexToReplace","Math","floor","abs","str","hash","charCodeAt","hashCode","splice","newSentence","newResults","optimize","visibility","position","top","left","minHeight","flexDirection","onMouseUp","map","line","whiteSpace","BulletComparator","setEditorState","onSelect","abbrReplacer","bulletOutputID","Map","heightMap","setHeightMap","newHeightMap","getBlockMap","keys","key","blockDiv","document","set","getBoundingClientRect","newEditorState","handleKeyCommand","command","newState","RichUtils","event","selection","window","toString","onKeyDown","ctrlKey","keyCode","preventDefault","RegExp","range","createRange","selectNode","removeAllRanges","addRange","tabIndex","Array","from","DPI","get","testTagRenderer","instance","td","row","col","prop","cellProperties","Handsontable","renderers","CheckboxRenderer","apply","arguments","TextRenderer","setAttribute","tableSettings","columns","disableVisualSelection","renderer","stretchH","autoWrapRow","maxRows","Infinity","manualRowResize","manualColumnResize","rowHeaders","colHeaders","trimWhitespace","enterBeginsEditing","manualRowMove","manualColumnMove","columnSorting","indicator","autoColumnSize","minRows","contextMenu","licenseKey","search","queryMethod","queryStr","DEFAULT_CALLBACK","testResult","getCellMeta","isSearchResult","AbbreviationTable","setData","tableRef","afterChange","payload","source","newData","hotInstance","getData","enabled","abbr","AbbrTools","getDataFromXLS","workbook","XLSX","read","raw","rows","utils","sheet_to_json","Sheets","SheetNames","readAsBinaryString","wb","book_new","sht","json_to_sheet","book_append_sheet","writeFile","confirm","res","xhttp","XMLHttpRequest","responseType","response","open","SampleAbbrFile","send","AbbreviationViewer","handleCardClick","word","This","onSelReplace","SynonymViewer","getSynonyms","phrase","onreadystatechange","readyState","dat","responseText","synonyms","item","hidden","prevProps","mainBody","replacedWord","otherAbbrs","abbrDict","header","onMouseDown","faPlus","size","explanation","noResults","SynonymList","Synonym","mainAbbrDisp","fontWeight","enabledAbbrDisp","disabledAbbrDisp","enabledAbbrs","filter","fontStyle","disabled","disabledAbbrs","defaultAbbrData","defaultEditorState","EditorState","createWithContent","ContentState","createFromText","BulletApp","setEnableOptim","setWidth","abbrData","setAbbrData","setAbbrDict","setSelection","currentTab","setCurrentTab","showThesaurus","setShowThesaurus","handleJSONImport","settingsArray","isArray","fromJS","getItem","newAbbrDict","forEach","fullWord","String","push","useCallback","finalAbbrDict","Object","abbrs","allApprovedAbbrs","string","regExp","p1","p2","p3","handleThesaurusHide","tabContents","newSel","trim","Abbreviation","newWidth","selectionsToReplace","contentState","block","regex","matchArr","exec","index","findWithRegex","anchorOffset","focusOffset","SelectionState","createEmpty","merge","newContentState","reverse","Modifier","replaceText","newText","getPlainText","toJS","activeElement","trailingSpaces","newEnd","newSelectionState","newContent","newEditorStateSelect","forceSelection","tab","newTab","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","WebFont","load","custom","families","ReactDOM","render","getElementById","xh","DONE","count","Count","incrementVisitors","URL","process","origin","addEventListener","fetch","headers","contentType","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.f5d2a0b5.chunk.js","sourcesContent":["import React from \"react\"\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faAngleDown } from \"@fortawesome/free-solid-svg-icons\"\n\nconst pdfjs = require('@ckhordiasma/pdfjs-dist');\nconst pdfjsWorker = require('@ckhordiasma/pdfjs-dist/build/pdf.worker.entry');\npdfjs.GlobalWorkerOptions.workerSrc = pdfjsWorker;\n\n//PDF import\nclass ImportTools extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.fileInputRef = React.createRef();\n        this.state = {\n            type: 'none',\n            hovering: false,\n        }\n    }\n\n    importFile = (e) => {\n        if (!this.fileInputRef.current.value) {\n            console.log('no file picked');\n            return;\n        } else {\n            let callback = (file) => { console.log(file) };\n            if (this.state.type === 'PDF') {\n                callback = this.getDataFromPDF;\n            } else if (this.state.type === 'JSON') {\n                callback = this.getDataFromJSON;\n            }\n            //return Promise.resolve(this.fileInputRef.current.files[0]).then(callback).then(() => {\n            //    this.fileInputRef.current.value = ''});\n            callback(this.fileInputRef.current.files[0]);\n            this.fileInputRef.current.value = '';\n        }\n    }\n    inputClick = (importType) => {\n        return () => {\n            this.setState({\n                type: importType,\n            });\n            this.fileInputRef.current.click();\n        };\n    }\n    getDataFromPDF = (file) => {\n        const { pullBullets, getPageInfo } = getBulletsFromPdf(file);\n        //note: these promises are PDFJS promises, not ES promises\n\n        //was not able to call this (this.props.onTextUpdate) inside the \"then\" scope, so I const'ed them out\n        const textUpdater = this.props.onTextUpdate;\n        const widthUpdater = this.props.onWidthUpdate;\n\n        Promise.all([pullBullets, getPageInfo]).then(([bulletsHTML, pageData]) => {\n            widthUpdater(parseFloat(pageData.width))();\n\n            // This is needed to convert the bullets HTML into normal text. It gets rid of things like &amp;\n            const bullets =\n                new DOMParser().parseFromString(bulletsHTML, 'text/html').documentElement.textContent;\n            textUpdater(bullets)();\n        });\n\n    }\n    getDataFromJSON = (file) => {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n\n            const data = JSON.parse(e.target.result);\n\n            this.props.onJSONImport(data);\n        };\n        reader.readAsText(file)\n    }\n\n    hoverOut = () => {\n        this.setState({ hovering: false });\n    }\n    toggleMenu = () => {\n        const current = this.state.hovering;\n        this.setState({ hovering: !current });\n    }\n    render() {\n        const menuState = this.state.hovering ? \"is-active\" : \"\";\n        return (\n            <div className={\"dropdown \" + menuState}>\n                <input type=\"file\" onChange={this.importFile} style={{ display: \"none\" }} ref={this.fileInputRef}></input>\n                <div className=\"dropdown-trigger\">\n                    <div className=\"buttons has-addons\">\n                        <button className=\"button\" onClick={this.inputClick('PDF')}>Import</button>\n                        <button className=\"button\" onClick={this.toggleMenu} aria-haspopup=\"true\" aria-controls=\"import-menu\" >\n                            <span className=\"icon\">\n\n                                <FontAwesomeIcon icon={faAngleDown} />\n                            </span>\n                        </button>\n                    </div>\n                </div>\n                <div className=\"dropdown-menu\" id=\"import-menu\" role=\"menu\" onMouseLeave={this.hoverOut}>\n                    <div className=\"dropdown-content\">\n                        <a href=\"?#\" className=\"dropdown-item\" onClick={this.inputClick('PDF')}>PDF</a>\n                        <a href=\"?#\" className=\"dropdown-item\" onClick={this.inputClick('JSON')}>JSON</a>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n// form width, space optimization, select text\nclass OutputTools extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n\n        }\n    }\n    render() {\n        const widthAWD = 202.321;\n        const widthEPR = 202.321;\n        const widthOPR = 201.041;\n        return (\n            <div className=\"field is-grouped\">\n                {/* if I want to group things together in a field, each subelement must have the control class name */}\n                <div className=\"control field has-addons\">\n                    <div className=\"control has-icons-right\">\n                        <input className=\"input\" id=\"widthInput\" type='number' min=\"100\" max=\"500\" step=\".001\" value={this.props.width} onChange={this.props.onWidthChange}></input>\n                        <span className='icon is-right'>mm</span>\n                    </div>\n                    <div className=\"control buttons has-addons\">\n                        <a  className={\"button is-primary \"  + (this.props.width === widthAWD ? '' : 'is-outlined')}\n                            onClick={this.props.onWidthUpdate(widthAWD)}>AWD</a>\n                        <a className={\"button is-success \"  + (this.props.width === widthEPR ? '' : 'is-outlined')}\n                            onClick={this.props.onWidthUpdate(widthEPR)}>EPR</a>\n                        <a  className={\"button is-link \" + (this.props.width === widthOPR ? '' : 'is-outlined')}\n                            onClick={this.props.onWidthUpdate(widthOPR)}>OPR</a>\n                    </div>\n\n                </div>\n\n                <a  className={\"control button is-dark\" + (this.props.enableOptim ? '' : \"is-outlined\")}\n                    onClick={this.props.onOptimChange} id=\"enableOptim\">Auto-Space</a>\n            </div>\n        );\n    }\n}\n// normalize spaces\nclass InputTools extends React.PureComponent {\n\n    render() {\n        return (\n            <button className=\"button\" onClick={this.props.onTextNorm}>Renormalize Input Spacing</button>\n        );\n    }\n}\n// saving settings\nclass SaveTools extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.exportRef = React.createRef();\n        this.state = { hovering: false };\n    }\n    onSave = () => {\n        const settings = this.props.onSave();\n        //JSON stringifying an array for future growth\n        const storedData = JSON.stringify([settings]);\n        try {\n            localStorage.setItem('bullet-settings', storedData);\n            console.log(\"saved settings/data to local storage with character length \" + storedData.length);\n        } catch (err) {\n            if (err.name === 'SecurityError') {\n                alert(\"Sorry, saving to cookies does not work using the file:// interface and/or your browser's privacy settings\")\n            } else {\n                throw err;\n            }\n        }\n    }\n    onExport = () => {\n        const settings = this.props.onSave();\n        //JSON stringifying an array for future growth\n        const storedData = JSON.stringify([settings]);\n        const dataURI = 'data:application/JSON;charset=utf-8,' + encodeURIComponent(storedData);\n        this.exportRef.current.href = dataURI;\n        this.exportRef.current.click();\n        console.log(\"exported settings/data to JSON file with character length \" + storedData.length);\n\n    }\n    hoverOut = () => {\n        this.setState({ hovering: false });\n    }\n    toggleMenu = () => {\n        const current = this.state.hovering;\n        this.setState({ hovering: !current });\n    }\n    render() {\n        const menuState = this.state.hovering ? \"is-active\" : \"\";\n        return (\n            <div className={'dropdown ' + menuState}>\n                <div className=\"dropdown-trigger\">\n                    <div className=\"buttons has-addons\">\n                        <button className=\"button\" onClick={this.onSave}>Save </button>\n                        <button className=\"button\" aria-haspopup=\"true\" aria-controls=\"save-menu\" >\n                            <span className=\"icon\" onClick={this.toggleMenu} >\n                                <FontAwesomeIcon icon={faAngleDown} />\n                            </span>\n                        </button>\n                    </div>\n                </div>\n                <div className=\"dropdown-menu\" id=\"save-menu\" role=\"menu\" onMouseLeave={this.hoverOut}>\n                    <div className=\"dropdown-content\">\n                        <a href=\"?#\" className=\"dropdown-item\" onClick={this.onSave}>Cookie</a>\n                        <a href=\"?#\" className=\"dropdown-item\" onClick={this.onExport}>JSON</a>\n                    </div>\n                </div>\n\n                <a href=\"?#\" style={{ display: \"none\" }} download='settings.json' ref={this.exportRef}></a>\n            </div>\n        );\n    }\n}\nclass Logo extends React.PureComponent {\n    render() {\n        return (\n            <h1 className='title'><span className=\"logo\">AF </span>\n                <span className=\"logo\">Bull</span>et\n                <span className=\"logo\"> Sh</span>aping &amp;\n                <span className=\"logo\"> i</span>teration\n                <span className=\"logo\"> t</span>ool\n            </h1>\n        );\n    }\n}\nclass ThesaurusTools extends React.PureComponent {\n    render() {\n        return (\n            <a  className=\"button\" onClick={this.props.onHide} aria-haspopup=\"true\" aria-controls=\"thesaurus-menu\" >\n                <span>Thesaurus</span><span className=\"icon\"  >\n                    <FontAwesomeIcon icon={faAngleDown} />\n                </span>\n            </a>\n        );\n    }\n}\nclass DocumentTools extends React.PureComponent {\n    render() {\n        return (\n            <nav className=\"navbar\" role=\"navigation\" aria-label=\"main navigation\">\n                <div className=\"navbar-start\">\n                    <div className=\"navbar-item\">\n                        <SaveTools onSave={this.props.onSave} />\n                    </div>\n                    <div className=\"navbar-item\">\n                        <ImportTools onJSONImport={this.props.onJSONImport} onTextUpdate={this.props.onTextUpdate} onWidthUpdate={this.props.onWidthUpdate} />\n                    </div>\n                    <div className=\"navbar-item\">\n                        <OutputTools\n                            enableOptim={this.props.enableOptim} onOptimChange={this.props.onOptimChange}\n                            width={this.props.width} onWidthChange={this.props.onWidthChange}\n                            onWidthUpdate={this.props.onWidthUpdate} />\n                    </div>\n                    <div className=\"navbar-item\">\n                        <InputTools onTextNorm={this.props.onTextNorm} />\n                    </div>\n                    <div className=\"navbar-item\">\n                        <ThesaurusTools onHide={this.props.onThesaurusHide} />\n                    </div>\n                </div>\n            </nav>\n        );\n    }\n}\n\n// could not do a static class property because of MS edge\nconst Forms = {\n    all: {\n        'AF707': {\n            'fields': ['S2DutyTitleDesc', 'S4Assessment', 'S5Assessment', 'S6Assessment'],\n            'likelyWidth': '201.041mm'\n        },\n        'AF1206': {\n            'fields': ['specificAccomplishments', 'p2SpecificAccomplishments'],\n            'likelyWidth': '202.321mm'\n        },\n        'AF910': {\n            'fields': ['KeyDuties', 'IIIComments', 'IVComments', 'VComments', 'VIIIComments', 'IXComments'],\n            'likelyWidth': '202.321mm'\n        },\n        'AF911': {\n            'fields': ['KeyDuties', 'IIIComments', 'IVComments', 'VIIComments', 'VIIIComments', 'IXComments'],\n            'likelyWidth': '202.321mm'\n        },\n    }\n};\nfunction getBulletsFromPdf(filedata) {\n\n\n    const pdfSetup = filedata.arrayBuffer().then(function (buffer) {\n        const uint8Array = new Uint8Array(buffer);\n\n        return pdfjs.getDocument({ data: uint8Array }).promise;\n\n    });\n\n    const getXFA = pdfSetup.then(function (pdf) {\n        return pdf.getXFA();\n    });\n\n    const getFormName = pdfSetup.then(function (pdf) {\n        return pdf.getMetadata().then(function (result) {\n            const prefix = result.info.Custom[\"Short Title - Prefix\"];\n            const num = result.info.Custom[\"Short Title - Number\"];\n            return prefix + '' + num;\n        })\n    });\n    const getAllData = Promise.all([getFormName, getXFA]);\n    const pullBullets = getAllData.then(function (results) {\n\n        const formName = results[0];\n        const xfaDict = results[1];\n\n        let datasetXML = xfaDict['datasets'];\n        datasetXML = datasetXML.replace(/&#xD;/g, '\\n');\n\n        const parser = new DOMParser();\n        const xmlDoc = parser.parseFromString(datasetXML, \"text/xml\");\n\n        let bulletText = '';\n        for (let tagName of Forms.all[formName]['fields']) {\n            const bulletTag = xmlDoc.querySelector(tagName);\n            bulletText += bulletTag.innerHTML + '\\n';\n        }\n        return bulletText;\n    });\n\n    const getPageInfo = getAllData.then(function (results) {\n\n        const formName = results[0];\n        const xfaDict = results[1];\n\n        const templateXML = xfaDict['template'];\n        const parser = new DOMParser();\n        const xmlDoc = parser.parseFromString(templateXML, \"text/xml\");\n\n        let fonts = [];\n        let fontSizes = []\n        let widths = [];\n        let i = 0;\n        for (let tagName of Forms.all[formName]['fields']) {\n            const bulletTag = xmlDoc.querySelector(\"field[name='\" + tagName + \"'\");\n            fonts[i] = bulletTag.querySelector('font').getAttribute('typeface');\n            fontSizes[i] = bulletTag.querySelector('font').getAttribute('size');\n            widths[i] = bulletTag.getAttribute('w');\n            i += 1;\n        }\n        for (let font of fonts) {\n            if (font !== fonts[0]) {\n                console.log('warning: not all grabbed sections have the same font type');\n                break;\n            }\n        }\n        for (let fontSize of fontSizes) {\n            if (fontSize !== fontSizes[0]) {\n                console.log('warning: not all grabbed sections have the same font size');\n                break;\n            }\n        }\n        for (let width of widths) {\n            if (width !== widths[0]) {\n                console.log('warning: not all grabbed sections have the same width');\n                break;\n            }\n        }\n\n        return { 'font': fonts[0], 'fontSize': fontSizes[0], 'width': widths[0] }\n\n        //accomplishmentsTag = templateXML.match(/name=\"specificAccomplishments\"(.*?)<\\/field/);\n        //console.log(accomplishmentsTag)\n    });\n    return { pullBullets, getPageInfo };\n}\n\nfunction getSelectionInfo(editorState) {\n    // this block of code gets the selected text from the editor.\n    const selectionState = editorState.getSelection();\n    const anchorKey = selectionState.getAnchorKey();\n    const contentBlock = editorState.getCurrentContent().getBlockForKey(anchorKey);\n    const start = selectionState.getStartOffset();\n    const end = selectionState.getEndOffset();\n    const selectedText = contentBlock.getText().slice(start, end);\n    return {\n        selectionState,\n        anchorKey,\n        contentBlock,\n        start,\n        end,\n        selectedText,\n    }\n}\n\nconst findWithRegex = (regex, contentBlock, callback) => {\n    const text = contentBlock.getText();\n    let matchArr, start, end;\n    while ((matchArr = regex.exec(text)) !== null) {\n        start = matchArr.index;\n        end = start + matchArr[0].length;\n        callback(start, end);\n    }\n};\n\n\n// all widths in this function are in pixels\nfunction renderBulletText(text, getWidth, width) {\n    \n    width = width + 0.55;\n    // this function expects a single line of text with no line breaks.\n    if(text.match('\\n')){\n        console.error('renderBulletText expects a single line of text');\n    }\n    \n    const fullWidth = getWidth(text.trimEnd());\n\n    if (fullWidth < width) {\n        return {\n            textLines: [text],\n            fullWidth: fullWidth,\n            lines: 1,\n            overflow: fullWidth - width,\n        };\n    } else {\n        // Scenario where the width of the text is wider than desired.\n        //  In this case, work needs to be done to figure out where the line breaks should be. \n\n        // Regex- split after one of the following: \\u2004 \\u2009 \\u2006 \\s ? / | - % ! \n        // but ONLY if immediately followed by: [a-zA-z] [0-9] + \\\n        const textSplit = text.split(/(?<=[\\u2004\\u2009\\u2006\\s?/|\\-%!])(?=[a-zA-Z0-9+\\\\])/);\n\n        // check to make sure the first token is smaller than the desired width.\n        //   This is usually true, unless the desired width is abnormally small, or the \n        //   input text is one really long word\n        if (getWidth(textSplit[0]) < width) {\n            let answerIdx = 0;\n            for (let i = 1; i <= textSplit.length; i++) {\n                const evalText = textSplit.slice(0, i).join('').trimEnd();\n                const evalWidth = getWidth(evalText);\n                if (evalWidth > width) {\n                    answerIdx = i - 1;\n                    break;\n                }\n            }\n            const recursedText = textSplit.slice(answerIdx, textSplit.length).join('');\n\n            if (recursedText === text) {\n                console.warn(\"Can't fit \\\"\" + text + \"\\\" on a single line\\n\", {text, width, fullWidth});\n                return {\n                    textLines: [text],\n                    fullWidth,\n                    lines: 1,\n                    overflow: fullWidth - width,\n                };\n            } else {\n                const recursedResult = renderBulletText(recursedText, getWidth, width);\n\n                return {\n                    textLines: [textSplit.slice(0, answerIdx).join(''), ...recursedResult.textLines],\n                    fullWidth: fullWidth,\n                    lines: 1 + recursedResult.lines,\n                    overflow: fullWidth - width,\n                }\n            }\n\n        } else {\n\n            const avgCharWidth = fullWidth / (text.length);\n            const guessIndex = parseInt(width / avgCharWidth);\n            const firstGuessWidth = getWidth(text.substring(0, guessIndex))\n            let answerIdx = guessIndex;\n            if (firstGuessWidth > width) {\n                for (let i = guessIndex - 1; i > 0; i--) {\n                    const nextGuessWidth = getWidth(text.substring(0, i));\n                    if (nextGuessWidth < width) {\n                        answerIdx = i;\n                        break;\n                    }\n                }\n            } else if (firstGuessWidth < width) {\n                for (let i = guessIndex; i <= text.length; i++) {\n\n                    const nextGuessWidth = getWidth(text.substring(0, i));\n                    if (nextGuessWidth > width) {\n                        answerIdx = i - 1;\n                        break;\n                    }\n                }\n            }\n            const recursedText = text.substring(answerIdx, text.length);\n            if (recursedText === text) {\n                console.warn(\"Can't fit \\\"\" + text + \"\\\" on a single line\\n\", {text, width, fullWidth});\n                return {\n                    textLines: [text],\n                    fullWidth,\n                    lines: 1,\n                    overflow: fullWidth - width\n                };\n            } else {\n                const recursedResult = renderBulletText(recursedText, getWidth, width);\n\n                return {\n                    textLines: [text.substring(0, answerIdx), ...recursedResult.textLines],\n                    fullWidth: fullWidth,\n                    lines: 1 + recursedResult.lines,\n                    overflow: fullWidth - width,\n                }\n            }\n        }\n    }\n}\n\nfunction tokenize (sentence) {\n    return sentence.split(/[\\s]+/);\n}\n\nexport { Logo, DocumentTools, getSelectionInfo, findWithRegex, renderBulletText, tokenize };\n","// optimization status codes\n// status codes for optimization direction \nexport const STATUS = {\n    OPTIMIZED: 0,\n    FAILED_OPT: 1,\n    NOT_OPT: -1,\n    MAX_UNDERFLOW: -4\n}\n\n","import React from \"react\"\nimport { renderBulletText, tokenize } from '../utils/Tools.js'\nimport { optimize } from '../utils/utils'\nimport {STATUS} from '../../const/const'\n\nfunction Bullet({ text=\"\", widthPx=500, enableOptim=false, height, onHighlight }) {\n    const canvasRef = React.useRef(null);\n    const [outputTextLines, setOutputTextLines] = React.useState(() => [' ']);\n\n    const [color, setColor] = React.useState('inherit');\n    const [loading, setLoading] = React.useState(false);\n    const [optimStatus, setOptimStatus] = React.useState(STATUS.NOT_OPT);\n    const [rendering, setBulletRendering] = React.useState({ textLines: [''] });\n\n    function getTextWidth(txt, canvas){\n        const context = canvas.getContext('2d');\n        context.font = '12pt Times New Roman';\n        context.textAlign = 'left';\n        return (context.measureText(txt).width);\n     }\n\n    // This effect updates the text rendering (i.e. enforces width constraints by inserting newlines)\n    //   whenever the props text input is updated.\n    React.useEffect(() => {\n        \n        setBulletRendering(renderBulletText(text, (txt) => getTextWidth(txt,canvasRef.current), widthPx));\n\n    }, [text, widthPx, enableOptim]);\n    // [] indicates that this happens once after the component mounts.\n    // [text] indicates that this happens every time the text changes from the user (from props)\n\n    // This effect happens after bullet rendering changes. It evaluates the rendered bullet and\n    //  sees how it can be improved with modified spaces. \n    React.useEffect(() => {\n\n        setLoading(true);\n        setOutputTextLines(rendering.textLines);\n        if (enableOptim) {\n            const optimizer = (txt) => renderBulletText(txt, (txt) => getTextWidth(txt, canvasRef.current), widthPx);\n            const optimResults = optimize(text, optimizer);\n            setLoading(false);\n            setOptimStatus(optimResults.status);\n            setOutputTextLines(optimResults.rendering.textLines);\n            \n        } else {\n            if(rendering.overflow < STATUS.MAX_UNDERFLOW || rendering.overflow > 0){\n                setOptimStatus(STATUS.FAILED_OPT);\n            }else{\n                setOptimStatus(STATUS.OPTIMIZED)\n            }\n            setOutputTextLines(rendering.textLines);\n            setLoading(false);\n        }\n\n    }, [rendering, enableOptim, text, widthPx]);\n\n    //color effect\n    React.useEffect(() => {\n        if (loading) {\n            setColor(\"silver\")\n        } else if (optimStatus === STATUS.FAILED_OPT) {\n            setColor(\"red\");\n        } else {\n            setColor(\"black\");\n        }\n    }, [loading, outputTextLines, optimStatus])\n\n    // the style properties help lock the canvas in the same spot and make it essentially invisible.\n    //whitespace: pre-wrap is essential as it allows javascript string line breaks to appear properly.\n    return (\n        <>\n            <canvas\n                ref={canvasRef}\n                style={{\n                    visibility: \"hidden\",\n                    position: \"absolute\",\n                    top: \"-1000px\",\n                    left: \"-1000px\"\n                }} />\n            <div style={{\n                minHeight: height,\n                color: color,\n                display:'flex',\n                flexDirection:'column',\n            }} onMouseUp={onHighlight} >\n                {outputTextLines.map((line)=>{\n                    return <span key={line} style={{whiteSpace:\"pre\"}}>{line}</span>;\n                })}\n            </div>\n        </>\n    );\n    //return canvas;\n}\n\nexport default Bullet;","import {tokenize} from './Tools'\nimport {STATUS} from '../../const/const'\n\nexport const hashCode = (str) => {\n    let hash = 0, i, chr;\n    if (str.length === 0) return hash;\n    for (i = 0; i < str.length; i++) {\n      chr = str.charCodeAt(i);\n      hash = ((hash << 5) - hash) + chr;\n      hash |= 0; // Convert to 32bit integer\n    }\n    return hash;\n  };\n\nexport const getRandomInt =(seed, max) => {\n    return Math.floor(Math.abs((Math.floor(9 * hashCode(seed) + 5) % 100000) / 100000) * Math.floor(max));\n}\n\nexport const optimize = (sentence, evalFcn) => {\n\n    const smallerSpace = \"\\u2006\";\n    const largerSpace = \"\\u2004\";\n\n    //initialization of optimized words array\n    let optWords = tokenize(sentence.trimEnd());\n\n    const initResults = evalFcn(sentence);\n\n    // good\n    if (initResults.overflow === 0) {\n        return initResults;\n    }\n\n    //initial instantiation of previousResults\n    let prevResults = initResults;\n    let finalResults = initResults;\n    const newSpace = (initResults.overflow >= 0) ? smallerSpace : largerSpace;\n\n    let finalOptimStatus = STATUS.NOT_OPT;\n\n    // like in the while loop, want to not replace the first space after the dash.\n    const worstCaseResults = evalFcn(optWords[0] + ' ' + optWords.slice(1).join(newSpace));\n\n    if( (newSpace === smallerSpace && worstCaseResults.overflow > 0) || \n            (newSpace === largerSpace && worstCaseResults.overflow < STATUS.MAX_UNDERFLOW) ){\n            // this means that there is no point in trying to optimize.\n            \n            return {\n                status: STATUS.FAILED_OPT,\n                rendering: worstCaseResults,\n            };\n    }\n\n    while (initResults.overflow > 0 || initResults.overflow < STATUS.MAX_UNDERFLOW) {\n        //don't select the first space after the dash- that would be noticeable and look wierd.\n        // also don't select the last word, don't want to add a space after that.\n        let indexToReplace = getRandomInt(optWords.join(''), optWords.length - 1 - 1) + 1;\n\n        //merges two elements together, joined by the space\n        optWords.splice(\n            indexToReplace, 2,\n            optWords.slice(indexToReplace, indexToReplace + 2).join(newSpace)\n        );\n\n        //make all other spaces the normal space size\n        let newSentence = optWords.join(' ');\n\n        console.log(newSentence.split(' '))\n        let newResults = evalFcn(newSentence);\n\n        if (initResults.overflow <= 0 && newResults.overflow > 0) {\n            console.log(\"Note: Can't add more spaces without overflow, reverting to previous\" );\n            finalResults = prevResults;\n            finalOptimStatus = STATUS.OPTIMIZED;\n            break;\n        } else if (initResults.overflow > 0 && newResults.overflow < 0) {\n            console.log(\"Removed enough spaces. Terminating.\" );\n            finalResults = newResults;\n            finalOptimStatus = STATUS.OPTIMIZED;\n            break;\n        }\n        \n        prevResults = newResults;\n    }\n    return {\n        status: finalOptimStatus,\n        rendering: finalResults,\n    };\n}","import React from \"react\"\nimport { Editor,  RichUtils } from \"draft-js\"\nimport \"draft-js/dist/Draft.css\";\nimport { getSelectionInfo } from '../utils/Tools'\nimport Bullet from './Bullet'\n\nconst DPI = 96;\nconst MM_PER_IN = 25.4;\nconst DPMM = DPI / MM_PER_IN;\n\nfunction BulletComparator({editorState, setEditorState, width, onSelect, abbrReplacer, enableOptim }) {\n    \n    const bulletOutputID = \"bulletOutput\";\n    const [heightMap, setHeightMap] = React.useState(new Map());\n    // Editor callback that adds rich text editor keybinds\n    const handleKeyCommand = (command, editorState) => {\n        const newState = RichUtils.handleKeyCommand(editorState, command);\n        if (newState) {\n            setEditorState(newState);\n            return 'handled';\n        }\n        return 'not-handled';\n    }\n\n    // Editor callback that runs whenever edits or selection changes occur.\n    const onChange = (newEditorState) => {\n\n        //const content = editorState.getCurrentContent();\n        // ordered map has a key and a block associasted with it\n        //const blockMap = content.getBlockMap();\n        /*\n        for(let [key,block] of blockMap){\n            console.log(block.getText());\n        }\n        */\n        const { selectedText } = getSelectionInfo(newEditorState)\n        if (onSelect && selectedText !== '') onSelect(selectedText);\n        \n        setEditorState(newEditorState);\n    }\n\n    // This other bullet selection is for when things are selected on the optimized output\n    const onBulletSelect = (event) => {\n        const selection = window.getSelection().toString();\n        if (selection !== \"\") {\n            onSelect(selection)\n        }\n    }\n\n    // control-a selectability on bullet outputs\n    function selectOutput(e) {\n        if (e.ctrlKey && e.keyCode === 65) {\n            e.preventDefault();\n            //console.log('control-a')\n            //console.log(this.outputRef.current)\n            if (e.target.id.match(new RegExp(bulletOutputID))) {\n                const range = document.createRange();\n                range.selectNode(e.target);\n                window.getSelection().removeAllRanges();\n                window.getSelection().addRange(range);\n            }\n        }\n    }\n\n    React.useEffect(()=>{\n        let newHeightMap = new Map();\n        for(let key of editorState.getCurrentContent().getBlockMap().keys()){\n            const blockDiv = document.querySelector(`div[data-offset-key=\"${key}-0-0\"]`);\n            if(blockDiv) newHeightMap.set(key, blockDiv.getBoundingClientRect().height);\n        };\n        setHeightMap(newHeightMap);\n    },[editorState])\n\n    return (\n        <div className=\"bullets columns is-multiline\" >\n            <div className=\"column\" style={{\n                // width: width + 'mm',\n            }}>\n                <h2 className='subtitle'>Input Bullets Here:</h2>\n                <div className=\"border\" style={{ width: (width+1) + 'mm'}}>\n                    <Editor \n                        editorState={editorState} onChange={onChange} handleKeyCommand={handleKeyCommand} />\n                </div>\n            </div>\n            <div className=\"column\" >\n                <h2 className='subtitle'>View Output Here:</h2>\n                <div className=\"border\" id={bulletOutputID} style={{ width: (width+1) + 'mm' }}\n                    onMouseUp={onBulletSelect} onKeyDown={selectOutput} tabIndex=\"0\">\n                    {Array.from(editorState.getCurrentContent().getBlockMap(), ([key, block]) => {\n                        let text = block.getText();\n                        if (abbrReplacer) text = abbrReplacer(text);\n                        \n                        return <Bullet key={key} text={text} widthPx={ width * DPMM } height={heightMap.get(key)} \n                            enableOptim={enableOptim} />\n                    })}\n                </div>\n            </div>\n        </div>);\n}\n\nexport default BulletComparator;","export default __webpack_public_path__ + \"static/media/abbrs.ebd0e99b.xlsx\";","import React from 'react';\nimport { HotTable } from '@handsontable/react';\nimport Handsontable from 'handsontable';\nimport 'handsontable/dist/handsontable.full.css';\n\nconst testTagRenderer = function(instance, td, row, col, prop, value, cellProperties){\n    \n    if(cellProperties.prop === 'enabled'){\n        Handsontable.renderers.CheckboxRenderer.apply(this,arguments);\n    } else{\n        Handsontable.renderers.TextRenderer.apply(this, arguments);\n    }\n    //console.log(row)\n    //console.log({instance, cellProperties})\n    td.setAttribute(\"data-testid\", cellProperties.prop + '-' + row);\n    \n}\n\nconst tableSettings = {\n    columns: [{\n      data: 'enabled',\n      type: 'checkbox',\n      disableVisualSelection: true,\n      width: 20,\n      renderer: testTagRenderer,\n    }, {\n      data: 'value',\n      type: 'text',\n      renderer: testTagRenderer,\n    }, {\n      data: 'abbr',\n      type: 'text',\n      renderer: testTagRenderer,\n    },\n    ],\n    stretchH: 'all',\n    width: 500,\n    autoWrapRow: true,\n    height: 500,\n    maxRows: Infinity,\n    manualRowResize: true,\n    manualColumnResize: true,\n    rowHeaders: true,\n    colHeaders: [\n      'Enabled',\n      'Word',\n      'Abbreviation',\n    ],\n    trimWhitespace: false,\n    enterBeginsEditing: false,\n    manualRowMove: true,\n    manualColumnMove: true,\n    columnSorting: {\n      indicator: true\n    },\n    autoColumnSize: false,\n    minRows: 15,\n    contextMenu: true,\n    licenseKey: 'non-commercial-and-evaluation',\n    search: {\n      queryMethod: function (queryStr, value) {\n        return queryStr.toString() === value.toString();\n      },\n      callback: function (instance, row, col, value, result) {\n        const DEFAULT_CALLBACK = function (instance, row, col, data, testResult) {\n          instance.getCellMeta(row, col).isSearchResult = testResult;\n        };\n  \n        DEFAULT_CALLBACK.apply(this, arguments);\n      },\n    },\n  };\n\nfunction AbbreviationTable({data, setData}){\n    const tableRef = React.useRef(null)\n    \n    const update = (payload, source)=>{    \n        console.log({source, payload, tableRef: tableRef.current , data})\n\n        if(source !== 'loadData' && tableRef.current !== null){\n            const rawData = tableRef.current.hotInstance.getData();\n            const newData = rawData.map((row)=>{ \n                return {\n                    enabled: row[0],\n                    value: row[1],\n                    abbr: row[2]\n                }\n             });\n            setData(newData)\n        }\n    }\n\n    return (<HotTable {...tableSettings}\n        data={data}\n        ref={tableRef}\n        afterChange={update}\n    />)\n}\n\nexport default AbbreviationTable;\n","import React from \"react\"\nimport XLSX from \"xlsx\"\nimport SampleAbbrFile from '../../static/abbrs.xlsx'\nimport AbbreviationTable from './AbbreviationTable.js'\n\n\nfunction AbbrTools({ data, setData, ...props}) {\n\n    const fileInputRef = React.createRef();\n    function importSampleAbbrs() {\n        return new Promise((res) => {\n            const xhttp = new XMLHttpRequest();\n            xhttp.responseType = 'blob';\n            xhttp.onload = () => {\n                res(xhttp.response);\n            }\n            xhttp.open('GET', SampleAbbrFile, true);\n            xhttp.send();\n        }).then(getDataFromXLS);\n    }\n    function importAbbrs(e) {\n\n        if (!fileInputRef.current.value) {\n            console.log('no file picked');\n            return;\n        } else {\n            getDataFromXLS(fileInputRef.current.files[0]);\n            fileInputRef.current.value = '';\n        }\n\n    }\n    function getDataFromXLS(file) {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n            const data = e.target.result;\n            const workbook = XLSX.read(data, {\n                type: 'binary',\n                raw: true,\n            });\n            const rows = XLSX.utils.sheet_to_json(\n                workbook.Sheets[workbook.SheetNames[0]],\n                { 'header': ['enabled', 'value', 'abbr'] })\n                .map(({enabled, value, abbr})=>{\n                        return {enabled, value, abbr}\n                });\n            \n            // checks first row, enabled value and see if it matches header text\n            // normally enabled is a boolean.\n            if((rows[0].enabled.toString()).match(/enabled/i)){\n                setData(rows.slice(1));\n            } else{\n                setData(rows);\n            }\n            \n        };\n        reader.readAsBinaryString(file)\n    }\n    function exportToXLS() {\n        const wb = XLSX.utils.book_new();\n        const sht = XLSX.utils.json_to_sheet(data);\n        XLSX.utils.book_append_sheet(wb, sht, 'abbrs')\n        XLSX.writeFile(wb, 'abbrs.xlsx');\n    }\n    function inputClick() {\n        fileInputRef.current.click();\n    }\n\n\n    return (\n        <div className='toolbox'>\n            <input type=\"file\" onChange={importAbbrs} ref={fileInputRef} style={{ display: \"none\" }}></input>\n            <button className=\"button\" onClick={inputClick}>Import Abbrs</button>\n            <button className=\"button\" onClick={exportToXLS}>Export Abbrs</button>\n            <button className=\"button\" onClick={() => {\n                if (window.confirm(\"Are you sure you want to remove all existing acronyms and replace with a common list?\")) {\n                    importSampleAbbrs();\n                }\n            }}>Load Common Abbrs</button>\n        </div>\n    );\n\n}\n\nfunction AbbreviationViewer({ data, setData }) {\n    return (\n        <div>\n            <AbbrTools setData={setData} data={data} />\n            <AbbreviationTable data={data} setData={setData} />\n        </div>\n    );\n}\n\nexport default AbbreviationViewer;\n","import React from \"react\"\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons\"\n\n\nconst handleCardClick = (word, This) => {\n    return (e) => {\n        e.preventDefault();\n        This.props.onSelReplace(word);\n    }\n}\n\nclass SynonymViewer extends React.PureComponent {\n    constructor(props) {\n        super(props)\n        this.state = {\n            synonyms: [],\n            hidden: true,\n        }\n    }\n    getSynonyms = (phrase) => {\n        const xhttp = new XMLHttpRequest();\n        xhttp.onreadystatechange = () => {\n            if (xhttp.readyState === 4 && xhttp.status === 200) {\n                const dat = JSON.parse(xhttp.responseText);\n\n                if (dat.length !== 0) {\n                    this.setState({\n                        synonyms: dat.map((item) => { return item.word }),\n                    });\n                } else {\n                    this.setState({\n                        synonyms: []\n                    })\n                }\n            }\n        }\n        const maxWords = 75;\n        xhttp.open(\"GET\", \"https://api.datamuse.com/words?max=\" + maxWords + \"&ml=\" + phrase, true)\n        xhttp.send();\n    }\n    componentDidMount() {\n        this.getSynonyms(this.props.word);\n    }\n    componentDidUpdate(prevProps) {\n        if (prevProps.word !== this.props.word) {\n            this.getSynonyms(this.props.word);\n        }\n    }\n\n    render() {\n        const replacedWord = this.props.abbrReplacer(this.props.word);\n        const otherAbbrs = this.props.abbrDict[this.props.word];\n        const header =\n            <span className=\"tag is-medium\">\n                <Synonym word={this.props.word} key={this.props.word}\n                    abbr={replacedWord === this.props.word ? \"\" : replacedWord}\n                    otherAbbrs={otherAbbrs} />\n                <a className=\"icon is-small\" onMouseDown={handleCardClick(this.props.word, this)}>\n                    <FontAwesomeIcon icon={faPlus} size=\"xs\" color=\"#51cf66\" />\n                </a>\n            </span>;\n\n        const synonyms = <SynonymList onSelReplace={this.props.onSelReplace} key={this.state.synonyms.join('')} synonyms={this.state.synonyms} abbrDict={this.props.abbrDict} abbrReplacer={this.props.abbrReplacer} />;\n        const explanation = <span className=\"panel-block\" key='init'>Auto-thesaurus box - highlight a word or phrase below to show synonyms in this box</span>;\n        const noResults = <span className=\"panel-block\" key='none'>no results found</span>;\n        let mainBody;\n        if (this.props.word === '') {\n            mainBody = explanation;\n        } else if (this.state.synonyms.length === 0) {\n            mainBody = noResults;\n        } else {\n            mainBody = synonyms;\n        }\n\n        return (\n            <div className=\"card\">\n                <header className=\"card-header has-background-light\tis-shadowless\">\n                    <div className=\"card-header-title\" >\n                        <span >Thesaurus{this.props.word ? ':' : \"\"}</span>\n                        {this.props.word ? header : ''}\n                    </div>\n                    <a className=\"card-header-icon\" onClick={this.props.onHide}>\n                        <span className=\"delete\">\n                        </span>\n                    </a>\n                </header>\n                <div className=\"card-content\" style={{ height: \"290px\", overflow: \"auto\" }} >\n\n                    {mainBody}\n\n                </div>\n            </div>\n        )\n    }\n}\n\n\n\nclass SynonymList extends React.PureComponent {\n\n    handleCardClick = (word) => {\n        return (e) => {\n            e.preventDefault();\n            this.props.onSelReplace(word);\n\n        }\n    }\n    render() {\n\n        return (\n            <div>\n                <div className=\"tags are-medium \">\n                    {this.props.synonyms.map((word, i) => {\n                        const replacedWord = this.props.abbrReplacer(word);\n                        const otherAbbrs = this.props.abbrDict[word];\n                        return (\n                            <span className='tag' key={i} >\n                                <Synonym word={word}\n                                    abbr={replacedWord === word ? \"\" : replacedWord}\n                                    otherAbbrs={otherAbbrs} />\n                                <a className=\"icon\" onMouseDown={handleCardClick(word, this)}>\n                                    <FontAwesomeIcon icon={faPlus} size=\"xs\" color=\"#51cf66\" />\n                                </a>\n                            </span>\n                        )\n                    }\n                    )}\n                </div>\n            </div>\n        )\n\n    }\n}\nclass Synonym extends React.PureComponent {\n    render() {\n        //don't forget! you need to add capability to check on disabled abbreviations\n        let mainAbbrDisp = '';\n        if (this.props.abbr) {\n            mainAbbrDisp = <span style={{ fontWeight: \"bold\" }}>\n                {\" (\" + this.props.abbr + \")\"}\n            </span>;\n        }\n\n        let enabledAbbrDisp = ''\n        let disabledAbbrDisp = ''\n\n        if (this.props.otherAbbrs) {\n            if (this.props.otherAbbrs.enabled) {\n                let enabledAbbrs = this.props.otherAbbrs.enabled.filter((abbr) => {\n                    return abbr !== this.props.abbr;\n                });\n                if (enabledAbbrs.length > 0) {\n                    enabledAbbrDisp = <span style={{ fontStyle: \"italic\" }}>\n                        {\" (\" + enabledAbbrs.join(',') + \")\"}\n                    </span>\n                }\n            }\n\n            if (this.props.otherAbbrs.disabled) {\n                let disabledAbbrs = this.props.otherAbbrs.disabled;\n                if (disabledAbbrs.length > 0) {\n                    disabledAbbrDisp = <span style={{ fontStyle: \"italic\" }}>\n                        {\" (\" + disabledAbbrs.join(',') + \")\"}\n                    </span>\n                }\n            }\n        }\n        return (\n            <span>\n                <span>{this.props.word}</span>\n                {mainAbbrDisp}\n                {enabledAbbrDisp}\n                {disabledAbbrDisp}\n            </span>\n        )\n    }\n}\nexport default SynonymViewer;\n","\n\nexport const defaultText = '- This is a custom built bullet writing tool; abbreviations will be replaced according to table in the abbreviations tab--you will see output on the right\\n\\\n- This tool can optimize spacing; output will be red if the optimizer could not fix spacing with 2004 or 2006 Unicode spaces\\n\\\n- Click the thesaurus button to show one; select a word in this or the output box to view synonyms--words in parentheses are abbreviations that are configured'\n\nexport const defaultWidth = 202.321;\nexport const defaultAbbrData = [{\n    enabled: true,\n    value: 'abbreviations',\n    abbr: 'abbrs',\n  }, {\n    enabled: true,\n    value: 'table',\n    abbr: 'tbl',\n  }, {\n    enabled: true,\n    value: 'optimize',\n    abbr: 'optim',\n  }, {\n    enabled: true,\n    value: 'with ',\n    abbr: 'w/',\n  }, {\n    enabled: true,\n    value: 'parentheses',\n    abbr: 'parens',\n  },\n  ];\n\n","import React from \"react\"\nimport BulletComparator from \"./components/Bullets/BulletComparator\"\nimport { Logo, DocumentTools, getSelectionInfo, findWithRegex, tokenize } from \"./components/utils/Tools\"\nimport AbbreviationViewer from \"./components/Abbreviation/Abbreviation\"\nimport SynonymViewer from \"./components/utils/Thesaurus.js\"\nimport { EditorState, ContentState, Modifier, SelectionState } from \"draft-js\"\nimport {defaultAbbrData, defaultText, defaultWidth} from './const/defaults' \n\n\nconst defaultEditorState = EditorState.createWithContent(ContentState.createFromText(defaultText));\n\n// Note that all width measurements in this file are in millimeters.\nfunction BulletApp() {\n\n    const [enableOptim, setEnableOptim] = React.useState(true);\n    const [width, setWidth] = React.useState(defaultWidth);\n    const [abbrData, setAbbrData] = React.useState(defaultAbbrData);\n\n    const [abbrDict, setAbbrDict] = React.useState({});\n\n    const [selection, setSelection] = React.useState('');\n    const [currentTab, setCurrentTab] = React.useState(0);\n    const [showThesaurus, setShowThesaurus] = React.useState(false);\n    const [editorState, setEditorState] = React.useState(defaultEditorState);\n\n    function handleJSONImport(settingsArray) {\n        const settings = settingsArray[0]; //preparing for possible eventual several tabs of stuff\n        setEnableOptim(settings.enableOptim ?? enableOptim);\n\n        // for backwards compatibility\n        setWidth(parseFloat(settings.width ?? width));\n        \n        // for backwards compatibility \n        if (Array.isArray(settings.abbrData[0])){\n            setAbbrData(settings.abbrData.map((row) => {\n                return {\n                    enabled: row[0],\n                    value: row[1],\n                    abbr: row[2],\n                    };\n                }));\n        }else{\n            setAbbrData(settings.abbrData ?? abbrData);\n        }\n        \n        \n\n        setEditorState(\n            settings.editorState ? EditorState.fromJS(settings.editorState) :\n                EditorState.createWithContent(ContentState.createFromText(settings.text))\n        );\n    }\n\n    React.useEffect(() => {\n\n        let settingsArray;\n        try {\n\n            if (localStorage.getItem('bullet-settings')) {\n                settingsArray = JSON.parse(localStorage.getItem(\"bullet-settings\"));\n                handleJSONImport(settingsArray);\n            }\n        } catch (err) {\n            if (err.name === 'SecurityError') {\n                console.log('Was not able to get localstorage bullets due to use of file interface and browser privacy settings');\n            } else {\n                throw err;\n            }\n        }\n\n    }, [])\n\n    React.useEffect(() => {\n        const newAbbrDict = {};\n        abbrData.filter((row) => row.value !== null && row.abbr !== null ).forEach((row) => {\n            let fullWord = String(row.value).replace(/\\s/g, ' ');\n            let abbr = row.abbr;\n            let enabled = row.enabled;\n            newAbbrDict[fullWord] = newAbbrDict[fullWord] || []; //initializes to empty array if necessary\n\n            if (enabled) {\n                newAbbrDict[fullWord].enabled = newAbbrDict[fullWord].enabled || [];\n                newAbbrDict[fullWord].enabled.push(abbr)\n            } else {\n                newAbbrDict[fullWord].disabled = newAbbrDict[fullWord].disabled || [];\n                newAbbrDict[fullWord].disabled.push(abbr)\n            }\n        })\n\n        setAbbrDict(newAbbrDict);\n    }, [abbrData]);\n\n    const abbrReplacer = React.useCallback((sentence) => {\n\n        const finalAbbrDict = {};\n        Object.keys(abbrDict).forEach(\n            (word) => {\n                const abbrs = abbrDict[word]; //an array\n                //if there is at least one enabled abbreviation, take the lowest most element of it.\n                if (abbrs.enabled) {\n                    finalAbbrDict[word] = abbrs.enabled[abbrs.enabled.length - 1];\n                }\n            }\n        )\n\n        // courtesy of https://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex \n        function escapeRegExp(string) {\n            return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n        }\n\n        let modifiers = 'g';\n        const allApprovedAbbrs = Object.keys(finalAbbrDict).map(escapeRegExp).join('|');\n\n        // some info on the boundary parts of the regex:\n        // (^|\\\\W|\\\\b) \n        //     ^ - ensures words at the beginning of line are considered for abbreviation\n        //     \\\\W - expects abbr to be preceded by a non-word, i.e. a space, semicolon, dash, etc.\n        //     \\\\b - also check for word boundaries, this is necessary for edge cases like 'f/ ' and 'w/ '.\n        //            Otherwise things like 'with chicken' and 'for $2M' won't resolve to 'w/chicken' and 'f/$2M'.\n        // (\\\\W|\\\\b|$)\n        //     \\\\W, \\\\b - see above\n        //     $ - ensures words at end of line are considered for abbreviation\n        const regExp = new RegExp(\"(^|\\\\W|\\\\b)(\" + allApprovedAbbrs + \")(\\\\W|\\\\b|$)\", modifiers);\n        const newSentence = sentence.replace(regExp,\n            (match, p1, p2, p3) => {\n                //p2 = p2.replace(/ /g,'\\\\s')\n                let abbr = finalAbbrDict[p2];\n                if (!abbr) {\n                    abbr = '';\n                }\n                return p1 + abbr + p3;\n            }\n        );\n        return newSentence;\n    }\n        , [abbrDict])\n\n\n    function handleOptimChange() {\n        setEnableOptim(!enableOptim);\n    }\n    function handleSelect(newSel) {\n        const maxWords = 8;\n        if (newSel.trim() !== '') {\n            setSelection(tokenize(newSel.trim()).slice(0, maxWords).join(' '));\n        }\n\n    }\n\n    function handleWidthChange(e) {\n        setWidth(parseFloat(e.target.value))\n    }\n    function handleTextNorm() {\n\n        const selectionsToReplace = [];\n        const contentState = editorState.getCurrentContent();\n        contentState.getBlockMap().forEach((block, key) => {\n            findWithRegex(/\\s+/g, block, (anchorOffset, focusOffset) => {\n                const selection = SelectionState.createEmpty(key).merge({ anchorOffset, focusOffset });\n                selectionsToReplace.push(selection);\n            });\n        });\n\n        let newContentState = contentState;\n        // need to reverse the selections list, because otherwise as the newContentState is iteratively changed, \n        //  subsequent selections will get shifted and get all jacked up. This problem can be avoided by going backwards.\n        selectionsToReplace.reverse().forEach(selection => {\n            newContentState = Modifier.replaceText(newContentState, selection, ' ');\n        });\n\n        setEditorState(EditorState.createWithContent(newContentState));\n\n\n    }\n    function handleTextUpdate(newText) {\n        return () => setEditorState(EditorState.createWithContent(ContentState.createFromText(newText)));\n    }\n    function handleWidthUpdate(newWidth) {\n        return () => setWidth(newWidth);\n    }\n    function handleSave() {\n\n        return {\n            width: width,\n            text: editorState.getCurrentContent().getPlainText('\\n'),\n            editorState: editorState.toJS(),\n            abbrData: abbrData,\n            enableOptim: enableOptim,\n        }\n    }\n    function handleTabChange(newTab) {\n        return () => setCurrentTab(newTab);\n    }\n    function handleThesaurusHide() {\n        setShowThesaurus(!showThesaurus)\n    }\n    function handleSelReplace(word) {\n\n        if (document.activeElement.className.match(/public-DraftEditor-content/)) {\n\n            const { selectedText, start, anchorKey, selectionState } = getSelectionInfo(editorState);\n\n            const trailingSpaces = selectedText.match(/\\s*$/)[0];\n            const newEnd = start + word.length + trailingSpaces.length;\n\n            const newSelectionState = SelectionState.createEmpty(anchorKey).merge({\n                anchorOffset: start,\n                focusOffset: newEnd,\n            })\n\n            const newContent = Modifier.replaceText(editorState.getCurrentContent(), selectionState, word + trailingSpaces);\n            const newEditorState = EditorState.push(editorState, newContent, 'insert-characters');\n            const newEditorStateSelect = EditorState.forceSelection(newEditorState, newSelectionState);\n\n            setEditorState(newEditorStateSelect);\n        };\n    }\n\n    const tabs = ['Bullets', 'Abbreviations'];\n    const tabContents = [\n        <BulletComparator\n            editorState={editorState}\n            setEditorState={setEditorState}\n            abbrReplacer={abbrReplacer}\n            width={width}\n            onSelect={handleSelect} enableOptim={enableOptim} />,\n        <AbbreviationViewer\n            data={abbrData}\n            setData={setAbbrData} />\n    ];\n\n    return (\n\n        <div className=\"container is-fluid\">\n            <div className='columns is-multiline'>\n                <div className='column is-full'>\n                    <Logo />\n                    <DocumentTools\n                        enableOptim={enableOptim}\n                        onOptimChange={handleOptimChange}\n                        width={width} onWidthChange={handleWidthChange}\n                        onWidthUpdate={handleWidthUpdate}\n                        onTextNorm={handleTextNorm}\n                        onTextUpdate={handleTextUpdate}\n                        onSave={handleSave}\n                        onJSONImport={handleJSONImport}\n                        onThesaurusHide={handleThesaurusHide}\n                    />\n                </div>\n\n                <div className={'column is-full ' + (showThesaurus ? \"\" : \"is-hidden\")}>\n                    <SynonymViewer word={selection} onSelReplace={handleSelReplace} abbrDict={abbrDict} abbrReplacer={abbrReplacer}\n                        onHide={handleThesaurusHide} />\n                </div>\n                <div className=\"column is-full\">\n                    <div className=\"tabs\">\n                        <ul>\n                            {tabs.map((tab, i) => {\n                                return (\n                                    <li key={i} className={currentTab === i ? \"is-active\" : ''} ><a onClick={handleTabChange(i)}>{tab}</a></li>\n                                )\n                            }\n                            )}\n                        </ul>\n                    </div>\n                </div>\n                <div className='column is-full'>\n                    {tabContents[currentTab]}\n                </div>\n            </div>\n        </div>\n\n    );\n}\n\nexport default BulletApp;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\n\n//import {Bullet, BulletComparator, Skeleton} from \"./components/bullets.js\"\nimport BulletApp from \"./BulletApp.js\"\n\nimport \"./styles/index.scss\"\nimport 'handsontable/dist/handsontable.full.css'\n\nimport * as serviceWorker from './serviceWorker';\nimport WebFont from 'webfontloader';\n\n\n\nWebFont.load({\n  custom: {\n    families: ['AdobeTimes']\n  }\n});\n\n\n\n\nReactDOM.render(\n  <>\n    <div className=\"section\" id=\"stuff\" >\n      <BulletApp  />\n    </div>\n    <div className=\"container\" id=\"footer\">\n      <div>If you have feedback, submit\n          an <a href='https://github.com/AF-VCD/pdf-bullets/issues'>issue</a>\n          or a <a href=\"https://github.com/AF-VCD/pdf-bullets/pulls\">pull request</a>\n      </div>\n      <div>This site utilizes PDF.JS (pdf import), react-table (spreadsheet), draft-js (editor), the DataMuse API (thesaurus), and Bulma (CSS).</div>\n      <div>This site has basic analytics to track the total number of visits to the page. See <a href=\"https://github.com/ckhordiasma/log-bullet-visitors\">here</a> for details</div>\n      <div>Maintained by Christopher Kodama </div>\n    </div>\n  </>\n  , document.getElementById('root'));\n\nincrementVisitors();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n\nfunction incrementVisitors() {\n  // code for incrementing visitor count    \n  const xh = new XMLHttpRequest();\n  xh.onreadystatechange = () => {\n    if (xh.readyState === XMLHttpRequest.DONE) {\n      var status = xh.status;\n\n      // Not sure what status codes are acceptable.. using MDN successful responses and redirects range as a guide\n      if ((status >= 200 && status < 400)) {\n        // The request has been completed successfully\n        const count = JSON.parse(xh.response).Count;\n        console.log(\"The bullets site(s) have been visited \" + count + \" times in the last 7 days.\");\n\n      } else {\n        console.log(\"Visitor count increment: task failed successfully\");\n      }\n    }\n  }\n  xh.open(\"POST\", \"https://g5z50elklh.execute-api.us-east-2.amazonaws.com/default/LogVisitors\", true);\n  xh.send();\n}"],"sourceRoot":""}